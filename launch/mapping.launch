<launch>
	<include file="$(find realsense2_camera)/launch/rs_t265.launch" />
	<!--Starting the Scanner-->
	<include file="$(find freenect_launch)/launch/freenect.launch" />

	<node pkg="pointcloud_to_laserscan" type="pointcloud_to_laserscan_node" name="pointcloud_to_laserscan">
		<remap from="cloud_in" to="/camera/depth/points" />
		<rosparam>
      target_frame: camera_depth_frame
      transform_tolerance: 0.01
      min_height: 0.0
      max_height: 1.0
      
      angle_min: -1.5708
      angle_max: 1.5708
      angle_increment: 0.0087
      scan_time: 0.3333
      range_min: 0.45
      range_max: 4.0
      use_inf: true
      
      #concurrency_level affects number of pc queued for processing and the number of threadsused
      # 0: Detect number of cores
      # 1: Single threaded
      # 2: inf : Parallelism level
      concurrency_level: 1
    </rosparam>
		<!-- <rosparam file="$(find guardian)/params/base_local_planner_params.yaml" command="load" /> -->
	</node>
	<!-- Run the map server -->
	<node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" output="screen">
		<rosparam>
	odom_frame: odom
	base_frame: base_link
	map_frame: map

	map_update_interval: 0.5 # Publish new map

	maxUrange: 5.5 # Should be just less than sensor range
	maxRange: 6.1 # Should be just greater than sensor range
	particles: 100 # Increased from 80

	# Update frequencies
	linearUpdate: 0.3
	angularUpdate: 0.5
	temporalUpdate: 2.0
	resampleThreshold: 0.5

	# Initial Map Size
	xmin: -100.0
	ymin: -100.0
	xmax: 100.0
	ymax: 100.0
	delta: 0.05

	# All default
	sigma: 0.05
	kernelSize: 1
	lstep: 0.05
	astep: 0.05
	iterations: 5
	lsigma: 0.075
	ogain: 3.0
	lskip: 0
	llsamplerange: 0.01
	llsamplestep: 0.01
	lasamplerange: 0.005
	lasamplestep: 0.005

  </rosparam>
	</node>
</launch>